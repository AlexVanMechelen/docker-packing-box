#/usr/bin/env bash
_dataset_completions() {
  COMPREPLY=($(compgen -W "alter browse convert edit export fix ingest list make merge plot preprocess purge remove rename revert select show update view" "${COMP_WORDS[1]}"))
}

_experiment_completions() {
  if test -z "$EXPERIMENT" ; then
    COMPREPLY+=($(compgen -W "compress list open" "${COMP_WORDS[1]}"))
  else
    COMPREPLY+=($(compgen -W "close commit compress edit list show" "${COMP_WORDS[1]}"))
  fi
}

_model_completions() {
  COMPREPLY+=($(compgen -W "browse compare edit list preprocess purge rename show test train visualize" "${COMP_WORDS[1]}"))
}

_pbox_completions() {
  local cur prev
  COMPREPLY=()
  cur=${COMP_WORDS[COMP_CWORD]}
  prev=${COMP_WORDS[COMP_CWORD-1]}
  if [ $COMP_CWORD -eq 1 ]; then
    COMPREPLY=($(compgen -W "clean config list setup test workspace" "${COMP_WORDS[1]}"))
  elif [ $COMP_CWORD -eq 2 ]; then
    case "$prev" in
      "list"|"setup"|"test")
        COMPREPLY=($(compgen -W "analyzer detector packer unpacker" "${COMP_WORDS[2]}")) ;;
      *) ;;
    esac
  fi
}

_visualizer_completions() {
  COMPREPLY+=($(compgen -W "features find plot remove" "${COMP_WORDS[1]}"))
}

complete -F _dataset_completions dataset
complete -F _experiment_completions experiment
complete -F _model_completions model
complete -F _pbox_completions packing-box
complete -F _visualizer_completions visualizer
